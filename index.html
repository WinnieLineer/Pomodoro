<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç•ªèŒ„é˜ - æå‡ä½ çš„å°ˆæ³¨åŠ›</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #fff, #f5f5f5);
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        .container {
            background: #fff;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: 90%;
            max-width: 400px;
            position: relative;
        }

        h1 {
            font-size: 2em;
            color: #ff6347; /* ç•ªèŒ„ç´… */
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        h1::before {
            content: "ğŸ…";
            margin-right: 10px;
        }

        #timer {
            font-size: 3em;
            font-weight: bold;
            color: #ff6347;
            margin: 20px 0;
            background: rgba(255, 99, 71, 0.1);
            padding: 15px;
            border-radius: 10px;
        }

        #status {
            font-size: 1.2em;
            color: #555;
            margin-bottom: 10px;
        }

        #cycle {
            font-size: 1em;
            color: #777;
            margin-bottom: 20px;
        }

        .buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        button {
            padding: 10px 20px;
            font-size: 1em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, background 0.3s;
        }

        #startPauseBtn {
            background: #ff6347;
            color: white;
        }

        #startPauseBtn:hover {
            background: #e5533d;
            transform: scale(1.05);
        }

        #resetBtn {
            background: #ccc;
            color: #333;
        }

        #resetBtn:hover {
            background: #b0b0b0;
            transform: scale(1.05);
        }

        /* ç•ªèŒ„å‹•ç•«èƒŒæ™¯å…ƒç´  */
        .tomato {
            position: absolute;
            font-size: 50px;
            opacity: 0.2;
            animation: float 8s infinite ease-in-out;
        }

        .tomato:nth-child(1) { top: 10%; left: 10%; }
        .tomato:nth-child(2) { top: 70%; left: 15%; }
        .tomato:nth-child(3) { top: 20%; right: 10%; }
        .tomato:nth-child(4) { top: 80%; right: 15%; }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        /* RWD æ‰‹æ©Ÿç‰ˆèª¿æ•´ */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
                width: 90%;
            }

            h1 {
                font-size: 1.5em;
            }

            #timer {
                font-size: 2.5em;
            }

            button {
                padding: 8px 15px;
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="tomato">ğŸ…</div>
    <div class="tomato">ğŸ…</div>
    <div class="tomato">ğŸ…</div>
    <div class="tomato">ğŸ…</div>
    <div class="container">
        <h1>ç•ªèŒ„é˜</h1>
        <div id="status">å·¥ä½œæ™‚é–“</div>
        <div id="timer">25:00</div>
        <div id="cycle">ç•ªèŒ„é€±æœŸï¼š1/4</div>
        <div class="buttons">
            <button id="startPauseBtn" onclick="toggleTimer()">é–‹å§‹</button>
            <button id="resetBtn" onclick="resetTimer()">é‡ç½®</button>
        </div>
    </div>

    <audio id="alarmSound" src="https://www.soundjay.com/buttons/beep-01a.mp3"></audio>

    <script>
        let isRunning = false;
        let isWorkTime = true; // å·¥ä½œæˆ–ä¼‘æ¯
        let cycle = 1; // ç•¶å‰ç•ªèŒ„é€±æœŸ
        let timeLeft = 25 * 60; // é è¨­ 25 åˆ†é˜ï¼ˆç§’ï¼‰
        let timerInterval = null;

        const timerDisplay = document.getElementById('timer');
        const statusDisplay = document.getElementById('status');
        const cycleDisplay = document.getElementById('cycle');
        const startPauseBtn = document.getElementById('startPauseBtn');
        const alarmSound = document.getElementById('alarmSound');

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function toggleTimer() {
            if (isRunning) {
                clearInterval(timerInterval);
                startPauseBtn.textContent = 'é–‹å§‹';
            } else {
                timerInterval = setInterval(() => {
                    if (timeLeft > 0) {
                        timeLeft--;
                        updateTimerDisplay();
                    } else {
                        alarmSound.play(); // æ’­æ”¾æç¤ºéŸ³
                        if (isWorkTime) {
                            // å·¥ä½œçµæŸï¼Œé€²å…¥ä¼‘æ¯
                            isWorkTime = false;
                            timeLeft = (cycle % 4 === 0) ? 15 * 60 : 5 * 60; // 4 å€‹ç•ªèŒ„å¾Œé•·ä¼‘æ¯ 15 åˆ†é˜ï¼Œå¦å‰‡ 5 åˆ†é˜
                            statusDisplay.textContent = (cycle % 4 === 0) ? 'é•·ä¼‘æ¯' : 'çŸ­ä¼‘æ¯';
                        } else {
                            // ä¼‘æ¯çµæŸï¼Œé€²å…¥ä¸‹ä¸€å€‹ç•ªèŒ„
                            isWorkTime = true;
                            cycle = (cycle % 4 === 0) ? 1 : cycle + 1; // æ¯ 4 å€‹ç•ªèŒ„é‡ç½®é€±æœŸ
                            timeLeft = 25 * 60; // å·¥ä½œæ™‚é–“ 25 åˆ†é˜
                            statusDisplay.textContent = 'å·¥ä½œæ™‚é–“';
                            cycleDisplay.textContent = `ç•ªèŒ„é€±æœŸï¼š${cycle}/4`;
                        }
                        updateTimerDisplay();
                    }
                }, 1000);
                startPauseBtn.textContent = 'æš«åœ';
            }
            isRunning = !isRunning;
        }

        function resetTimer() {
            clearInterval(timerInterval);
            isRunning = false;
            isWorkTime = true;
            cycle = 1;
            timeLeft = 25 * 60;
            statusDisplay.textContent = 'å·¥ä½œæ™‚é–“';
            cycleDisplay.textContent = `ç•ªèŒ„é€±æœŸï¼š${cycle}/4`;
            startPauseBtn.textContent = 'é–‹å§‹';
            updateTimerDisplay();
        }

        // åˆå§‹åŒ–é¡¯ç¤º
        updateTimerDisplay();
    </script>
</body>
</html>